"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdateclient"]("main",{

/***/ "./src/components/CardList.tsx":
/*!*************************************!*\
  !*** ./src/components/CardList.tsx ***!
  \*************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.CardList = void 0;\nconst react_1 = __importStar(__webpack_require__(/*! react */ \"./node_modules/react/index.js\"));\nconst react_2 = __webpack_require__(/*! @chakra-ui/react */ \"./node_modules/@chakra-ui/react/dist/index.js\");\nconst bi_1 = __webpack_require__(/*! react-icons/bi */ \"./node_modules/react-icons/bi/index.esm.js\");\nconst fa6_1 = __webpack_require__(/*! react-icons/fa6 */ \"./node_modules/react-icons/fa6/index.esm.js\");\nconst Wrappers_1 = __webpack_require__(/*! ./ui-elements/Wrappers */ \"./src/components/ui-elements/Wrappers.tsx\");\nconst ListOptions_1 = __webpack_require__(/*! ./ListOptions */ \"./src/components/ListOptions.tsx\");\nconst AddCard_1 = __importDefault(__webpack_require__(/*! ./Functionality/AddCard */ \"./src/components/Functionality/AddCard.tsx\"));\nconst PopOver_1 = __webpack_require__(/*! ./ui-elements/PopOver */ \"./src/components/ui-elements/PopOver.tsx\");\nconst Modal_1 = __webpack_require__(/*! ./ui-elements/Modal */ \"./src/components/ui-elements/Modal.tsx\");\nconst utils_1 = __webpack_require__(/*! ./Functionality/utils */ \"./src/components/Functionality/utils.tsx\");\nconst react_query_1 = __webpack_require__(/*! @tanstack/react-query */ \"./node_modules/@tanstack/react-query/build/lib/index.js\");\nconst react_query_2 = __webpack_require__(/*! @tanstack/react-query */ \"./node_modules/@tanstack/react-query/build/lib/index.js\");\nconst apiClient_1 = __importDefault(__webpack_require__(/*! ../services/apiClient */ \"./src/services/apiClient.ts\"));\nconst LabelsProvider_1 = __webpack_require__(/*! ../providers/LabelsProvider */ \"./src/providers/LabelsProvider.tsx\");\nconst useAlerts_1 = __webpack_require__(/*! ../hooks/useAlerts */ \"./src/hooks/useAlerts.ts\");\nconst controlledForm_1 = __webpack_require__(/*! ./Forms/controlledForm */ \"./src/components/Forms/controlledForm.tsx\");\nconst bi_2 = __webpack_require__(/*! react-icons/bi */ \"./node_modules/react-icons/bi/index.esm.js\");\nconst CardList = ({ list, mutation }) => {\n    const [cards, setCards] = (0, react_1.useState)([]);\n    const [listTitle, setListTitle] = (0, react_1.useState)(list.name || \"\");\n    const [createCard, setCreateCard] = (0, react_1.useState)(false);\n    const inputRef = react_1.default.useRef(null);\n    const [editList, setEditList] = (0, react_1.useState)(false);\n    const newCardClient = new apiClient_1.default(`/lists/${list.id}/cards`);\n    const allCardsClient = new apiClient_1.default(`/lists/${list.id}/cards`);\n    const listClient = new apiClient_1.default(`/lists/${list.id}`);\n    const queryClient = (0, react_query_1.useQueryClient)();\n    const ByIdCardClient = (id) => new apiClient_1.default(`/cards/${id}`);\n    const toast = (0, react_2.useToast)();\n    const createCardToggler = () => {\n        setCreateCard(!createCard);\n    };\n    const handleRemoveList = () => {\n        mutation.mutate(list.id);\n    };\n    const newCardMutation = (0, react_query_2.useMutation)({\n        mutationFn: (card) => newCardClient.postData(card).then((res) => res.data),\n        onSuccess: () => {\n            queryClient.invalidateQueries([\"cards\", list.id]);\n            toast((0, useAlerts_1.useSuccess)(\"Card created successfully!\"));\n        },\n        onError: () => { toast((0, useAlerts_1.useFailure)(\"Failed to create card!\")); }\n    });\n    const deleteCardMutation = (0, react_query_2.useMutation)({\n        mutationFn: (card) => ByIdCardClient(card.id || \"\")\n            .deleteData()\n            .then((res) => res.data),\n        onSuccess: () => {\n            queryClient.invalidateQueries([\"cards\", list.id]);\n            toast((0, useAlerts_1.useSuccess)(\"Card deleted successfully!\"));\n        },\n        onError: () => { toast((0, useAlerts_1.useFailure)(\"Failed to delete card!\")); }\n    });\n    const updateCardMutation = (0, react_query_2.useMutation)({\n        mutationFn: (obj) => ByIdCardClient(obj.id)\n            .updateData(obj.card, {})\n            .then((res) => res.data),\n        onSuccess: (res) => {\n            queryClient.invalidateQueries([\"card\", res.card.id]);\n            toast((0, useAlerts_1.useSuccess)(\"Card updated successfully!\"));\n        },\n        onError: () => { toast((0, useAlerts_1.useFailure)(\"Failed to update card!\")); }\n    });\n    const updateListMutation = (0, react_query_2.useMutation)({\n        mutationFn: (list) => listClient.updateData(list, {}).then((res) => res.data),\n        onSuccess: (res) => {\n            queryClient.invalidateQueries([\"list\", res.newList.id]);\n            toast((0, useAlerts_1.useSuccess)(\"List updated successfully!\"));\n        },\n        onError: () => { toast((0, useAlerts_1.useFailure)(\"Failed to update list title!\")); }\n    });\n    const { isLoading } = (0, react_query_2.useQuery)({\n        queryKey: [\"cards\", list.id],\n        queryFn: () => allCardsClient.getData().then((res) => res.data),\n        onSuccess: (data) => {\n            console.log(`card lists: ${data}`);\n            setCards(data.cards);\n        },\n    });\n    (0, react_query_2.useQuery)({\n        queryKey: [\"list\", list.id],\n        queryFn: () => listClient.getData().then((res) => res.data),\n        onSuccess: (data) => {\n            setListTitle(data.newList.name || \"\");\n        }\n    });\n    const updateList = () => {\n        const newList = {\n            name: listTitle,\n        };\n        updateListMutation.mutate(newList);\n        setEditList(false);\n    };\n    if (isLoading)\n        console.log(\"list are loading ..\");\n    return (react_1.default.createElement(\"div\", null,\n        react_1.default.createElement(react_2.Stack, null,\n            !editList ? (react_1.default.createElement(Wrappers_1.Container, { variant: \"mdSpaceBetween\" },\n                react_1.default.createElement(react_2.Heading, { variant: \"listTitle\" }, listTitle),\n                react_1.default.createElement(PopOver_1.PopOverWrapper, { triggerVariant: \"ghost\", icon: react_1.default.createElement(fa6_1.FaEllipsis, null), closable: true, size: \"3xs\" },\n                    react_1.default.createElement(ListOptions_1.ListOptions, { removeList: () => handleRemoveList(), editMode: (state) => setEditList(state) })))) : (react_1.default.createElement(react_2.Stack, null,\n                react_1.default.createElement(controlledForm_1.ControlledForm, { placeholder: \"New list title\", handleOnchange: (e) => {\n                        setListTitle(e.target.value);\n                    }, value: listTitle, action: updateList }),\n                react_1.default.createElement(react_2.HStack, { justify: \"end\", px: 6 },\n                    react_1.default.createElement(react_2.Button, { onClick: () => {\n                            setEditList(false);\n                        }, variant: \"green\" },\n                        react_1.default.createElement(bi_2.BiCheck, { fontSize: \"16px\" })),\n                    react_1.default.createElement(react_2.Button, { onClick: () => setEditList(false), variant: \"outlineRed\" },\n                        react_1.default.createElement(bi_2.BiX, { fontSize: \"16px\" }))))),\n            createCard ? (react_1.default.createElement(AddCard_1.default, { cancelHandler: createCardToggler, placeholder: \"Add card title\", actionHandler: (title) => {\n                    const newCard = {\n                        title: title,\n                        listId: (list === null || list === void 0 ? void 0 : list.id) || \"\",\n                    };\n                    newCardMutation.mutate(newCard);\n                } })) : (react_1.default.createElement(react_2.Button, { onClick: () => {\n                    createCardToggler();\n                    (0, utils_1.handleFocus)(inputRef);\n                }, variant: \"largePrimary\" },\n                react_1.default.createElement(react_2.chakra.small, null, \"Add another Card\"),\n                react_1.default.createElement(bi_1.BiPlus, null))),\n            react_1.default.createElement(Wrappers_1.Container, { variant: \"listStack\", className: \"scrollable-container\" }, cards &&\n                cards.map((item, index) => {\n                    return (react_1.default.createElement(LabelsProvider_1.LabelsProvider, { card: item },\n                        react_1.default.createElement(react_2.Box, null,\n                            react_1.default.createElement(Modal_1.ModalCardWrapper, { card: item, id: index, key: index, deleteMutation: deleteCardMutation, updateMutation: updateCardMutation }))));\n                })))));\n};\nexports.CardList = CardList;\n\n\n//# sourceURL=webpack://client/./src/components/CardList.tsx?");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("a306af017f3e1a1846d9")
/******/ })();
/******/ 
/******/ }
);